# =============================================================================
# VAULTWARDEN - Configuration
# =============================================================================
# Gestionnaire de mots de passe compatible Bitwarden avec SSO Keycloak
#
# INSTRUCTIONS:
# 1. Copier vers .env: cp .env.example .env
# 2. Configurer les variables obligatoires
# 3. Creer le client Keycloak (voir README.md)
# 4. Deployer: docker compose up -d
# =============================================================================

# =============================================================================
# CONFIGURATION GENERALE
# =============================================================================

# Domaine principal (doit correspondre au .env parent)
DOMAIN=example.com

# Version Vaultwarden
VAULTWARDEN_VERSION=latest

# Port HTTP local
VAULTWARDEN_PORT=8222

# =============================================================================
# ADMINISTRATION
# =============================================================================

# Token admin (generer avec: openssl rand -base64 48)
# Acces admin: https://vault.example.com/admin
VAULTWARDEN_ADMIN_TOKEN=

# Autoriser les inscriptions publiques (false = invitation uniquement)
VAULTWARDEN_SIGNUPS_ALLOWED=false

# Autoriser les invitations par les utilisateurs existants
VAULTWARDEN_INVITATIONS_ALLOWED=true

# =============================================================================
# SSO KEYCLOAK (OIDC)
# =============================================================================

# Issuer Keycloak (URL complete du realm)
KEYCLOAK_ISSUER=https://keycloak.example.com/realms/portal

# Client ID dans Keycloak
VAULTWARDEN_CLIENT_ID=vaultwarden

# Client Secret (recuperer depuis Keycloak > Clients > vaultwarden > Credentials)
VAULTWARDEN_CLIENT_SECRET=

# Mode SSO uniquement (true = desactive login par email/password)
VAULTWARDEN_SSO_ONLY=false

# =============================================================================
# SMTP (Optionnel - pour invitations et notifications)
# =============================================================================

SMTP_HOST=
SMTP_FROM=vaultwarden@example.com
SMTP_PORT=587
SMTP_SECURITY=starttls
SMTP_USERNAME=
SMTP_PASSWORD=

# =============================================================================
# BASE DE DONNEES (Optionnel - SQLite par defaut)
# =============================================================================

# Decommenter pour PostgreSQL
# VAULTWARDEN_DB_PASSWORD=
# DATABASE_URL=postgresql://vaultwarden:${VAULTWARDEN_DB_PASSWORD}@vaultwarden-db/vaultwarden
